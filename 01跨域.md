## 跨域

##### Q1:跨域是什么？

浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都是跨域。

##### Q2：为什么会跨域？

存在浏览器同源策略，所以才会有跨域问题。

**同源策略**：限制从一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的关键的安全机制。（MDN）

1. **源**包括三个部分：协议、域名、端口（http协议的默认端口是80）。如果有任何一个部分不同，则源不同，那就是跨域了。

2. **非同源限制：**

   无法读取非同源网页的 Cookie、LocalStorage 和 IndexDB

   无法接触非同源网页的 DOM

   无法向非同源地址发送 AJAX 请求

##### Q3：在什么情形下分别怎么去应对？

1. 通过**JSONP**来做跨域通信

   原理：通过`<script>`标签的异步加载来实现的。比如说，实际开发中，我们发现，`head`标签里，可以通过`<script>`标签的`src`，里面放`url`，加载很多在线的插件。这就是用到了`JSONP`。

2. **WebSocket**

   创建WebSocket的对象，参数(ws)或(wss:加密),可以发出请求、接受对方消息

3. **CORS** 要服务器实现CORS接口

   跨域时，浏览器会拦截Ajax请求，并在`http`头中加`Origin`源

4. **Hash**

   `url`的`#`后面的内容就叫`Hash`。**Hash的改变，页面不会刷新**。

5. **postMessage()方法**

   